üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
REST API-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–∏—ë–º–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–µ—Ä–µ–≤–∞–ª–∞—Ö.
–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –æ–±—É—á–µ–Ω–∏—è. API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Flask + PostgreSQL.

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–∞–ª–∞ (POST)

–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞ –ø–æ id (GET)

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–∞–ª–∞ (PATCH, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å new)

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–∞–ª–æ–≤ –ø–æ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (GET)

‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
export FSTR_DB_HOST=localhost
export FSTR_DB_PORT=5432
export FSTR_DB_LOGIN=postgres
export FSTR_DB_PASS=yourpassword

# –ó–∞–ø—É—Å–∫ Flask-—Å–µ—Ä–≤–µ—Ä–∞
python app.py

üîå –û–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ API

‚úÖ POST /submitData
–î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–≤–∞–ª–µ.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

POST /submitData
Content-Type: application/json

{
  "beauty_title": "–ø–µ—Ä.",
  "title": "–ü—Ö–∏—è",
  "other_titles": "–¢—Ä–∏–µ–≤",
  "connect": "",
  "user": {
    "email": "user@email.tld",
    "phone": "79031234567",
    "fam": "–ü—É–ø–∫–∏–Ω",
    "name": "–í–∞—Å–∏–ª–∏–π",
    "otc": "–ò–≤–∞–Ω–æ–≤–∏—á"
  },
  "coords": {
    "latitude": "45.3842",
    "longitude": "7.1525",
    "height": "1200"
  },
  "level": {
    "winter": "",
    "summer": "1–ê",
    "autumn": "1–ê",
    "spring": ""
  },
  "images": [
    {"id": 1, "title": "–°–µ–¥–ª–æ–≤–∏–Ω–∞"},
    {"id": 2, "title": "–ü–æ–¥—ä–µ–º"}
  ]
}
–û—Ç–≤–µ—Ç:
{
  "status": 200,
  "message": null,
  "id": 42
}

üîç GET /submitData/<id>
–ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–≤–∞–ª–µ –ø–æ ID.

–ü—Ä–∏–º–µ—Ä:

GET /submitData/42

–û—Ç–≤–µ—Ç:
{
  "status": 200,
  "data": {
    "id": 42,
    "raw_data": { ... },
    "images": [ ... ],
    "status": "new",
    "moderated_at": null
  }
}

‚úèÔ∏è PATCH /submitData/<id>
–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–µ—Ä–µ–≤–∞–ª–µ, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å ‚Äî new. –ù–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ü—Ä–∏–º–µ—Ä:

PATCH /submitData/42
Content-Type: application/json

{
  "beauty_title": "–ø–µ—Ä. –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π",
  "title": "–ù–æ–≤—ã–π –ø–µ—Ä–µ–≤–∞–ª",
  "coords": { ... },
  "level": { ... },
  "images": [ ... ],
  "user": {
    "email": "user@email.tld",
    "phone": "79031234567",
    "fam": "–ü—É–ø–∫–∏–Ω",
    "name": "–í–∞—Å–∏–ª–∏–π",
    "otc": "–ò–≤–∞–Ω–æ–≤–∏—á"
  }
}

–û—Ç–≤–µ—Ç:
{
  "state": 1,
  "message": "Record updated successfully"
}

üìß GET /submitData/?user__email=<email>
–í—ã–¥–∞—ë—Ç —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–∞–ª–æ–≤, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

GET /submitData/?user__email=user@email.tld

–û—Ç–≤–µ—Ç:
{
  "status": 200,
  "data": [
    {
      "id": 42,
      "status": "new",
      "raw_data": { ... }
    },
    ...
  ]
}
